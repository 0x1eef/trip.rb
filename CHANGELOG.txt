# CHANGELOG

## v2.2.0

* Add "color" keyword argument to Trip.analyze.
  When false it disables color.

## v2.1.0

* Add "io" keyword argument to Trip.analyze

* Add "page" keyword argument to Trip.analyze

* Rename "Trip#run_safely" as "Trip#rescued_run".

* Improve trace analysis appearance

* Fix bug where duration would be incorrectly calculated

* Improve "Trip::Event" docs.

* Implement a best guess for the method notation used
  by "c-call" and "c-return" events. Given "Binding#receiver"
  returns self from the nearest Ruby method rather than the
  C method under trace I settled for a best guess.

  Ruby call and return events don't have this problem.

* Add "precision" keyword argument to "Trip.analyze".
  It sets the precision used when printing the
  execution time of a method.

* Add "time" column to the trace generated by "Trip::Analyzer",
  It represents the execution time of a method and is printed
  with return events.

* Add "Trip::Event#created_at"

## v2.0.3

* Fix botched release

## v2.0.2

* Fix typo.

## v2.0.1

* Fix typo

## v2.0.0

* Rename "Event#type" as "Event#name".

* Add "Trip.analyze" and "Trip::Analyzer".
  Must be required separately using require "trip/analyzer".
  Requires "paint" gem.

* Add "Trip::Event#caller_context"

* Add "Trip::Event::CallerContext"

* "Trip::Event#file" => "Trip::Event#path"

* Add "Trip::Event#call?", "Trip::Event#return?".

* Don't raise from "#resume" if a trace hasn't begun.
  Instead, start a trace.

* Refactor API documentation in "lib/trip.rb"

* Fix "gem build" warnings

## v1.2.1

* Update gemspec

* Adopt standardrb as linter

* Do not rescue Exception but instead rescue from StandardError,
  ScriptError, SecurityError, SystemStackError.

## v1.2.0

* gemspec: add Ruby 3.0 support

## v1.1.2

* gemspec: update email address.

## v1.1.1

* `Trip#pause_when` now returns `nil`.

* Fix YARD docs.

## v1.1.0

* Fix typo in constant name (`Trip::ProgessError` is now `Trip::ProgressError`).

* Remove the methods `Trip::Event.{method_calls, method_returns}` and the
  constants they used.

* Improve / update API documentation for the `Trip` class.

* Add API documentation for *all* `Trip::Event` methods.

* By default pause the tracer when it encounters Ruby method call and
  return events (ie those not implemented in C). The call and return events from
  methods implemented in C are ignored by default, although they can still be
  identified and used from a block given to `Trip#pause_when`:

  ```ruby
  trip = Trip.new { Kernel.puts 123 }
  trip.pause_when {|event| event.c_call? || event.c_return? }
  event = trip.start
  ```

## v0.1.2

  * Add magic frozen string comment to all `lib/` files (Riny 2.3+).

  * Remove `Trip#in_progress?``.

  * Rename `Trip::Event#name` as `Trip::Event#type`.

  * Rename `Trip::Event#method_name` as `Trip::Event#from_method`.

  * Rename `Trip::Event#module_name` as `Trip::Event#from_module`.

  * Raise `Trip::PauseError` when `Trip#pause_when` predicate causes the
    tracer to crash.
